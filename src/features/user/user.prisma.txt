model User {
  id                     String      @id @default(cuid())
  email                  String      @unique
  password               String
  name                   String?
  phone                  String?
  createdAt              DateTime    @default(now())
  updatedAt              DateTime    @updatedAt
  status                 Boolean     @default(true)
  resetPasswordToken     String?
  resetPasswordCode      String?
  resetPasswordExpires   DateTime?
  emailVerified          Boolean     @default(false)
  emailVerificationToken String?
  emailVerificationCode  String?
  emailVerificationCodeExpires DateTime?
  lastLoginAt            DateTime?
  roles                  String[]    @default(["user"])
  auditLogs              AuditLog[]
  movements              Movement[]
  ownedStores            Store[]     @relation("StoreOwner")
  stores                 StoreUser[]
  
  // Granular Permissions Relations
  userPermissions        UserPermission[]
  storePermissions       StorePermission[]
  createdUserPermissions UserPermission[] @relation("UserPermissionCreator")
  createdStorePermissions StorePermission[] @relation("StorePermissionCreator")
  createdPermissionTemplates PermissionTemplate[] @relation("PermissionTemplateCreator")
  createdPermissionAudits PermissionAuditLog[] @relation("PermissionAuditCreator")
  
  // Notifications
  notifications          Notification[]

  @@map("users")
}